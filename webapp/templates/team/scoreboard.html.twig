{% extends "team/base.html.twig" %}

{% block title %}Scoreboard {{ contest.shortname | default('') }} - {{ parent() }}{% endblock %}
{% block content %}
    <div data-ajax-refresh-target data-ajax-refresh-after="initializeScoreboard" class="mt-3">
        {% if show_scoreboard %}
            {% include 'partials/scoreboard.html.twig' with {jury: false, public: false, current_contest: current_team_contest} %}
        {% else %}
            <div class="alert alert-warning" role="alert">
                The scoreboard is disabled.
            </div>
        {% endif %}
    </div>
{% endblock %}

{% block extrafooter %}
    {% if show_scoreboard %}
        <script>
            pinScoreheader();
            $(function () {
                window.initializeScoreboard = function () {
                    var $newProgress = $('[data-ajax-refresh-target] > [data-progress-bar]');
                    if ($newProgress.length) {
                        var $oldProgress = $('body > [data-progress-bar]');
                        $oldProgress.html($newProgress.children());
                        $newProgress.parent().remove();
                    }
                    pinScoreheader();
                };
            });
        </script>
    {% endif %}
{% endblock %}
